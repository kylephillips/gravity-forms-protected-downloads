var GFormProtectedFileSelector=function(){var e=this,t=jQuery;return e.selectors={openBtn:"[data-gfpd-open-media-library]",field:"#gfpd_download",removeBtn:"[data-gfpd-remove-attachment]"},e.bindEvents=function(){t(document).on("click",e.selectors.openBtn,function(a){a.preventDefault(),e.openWindow(t(this))}),t(document).on("click",e.selectors.removeBtn,function(t){t.preventDefault(),e.clearField()})},e.openWindow=function(t){if(wp.media.frames.gfpd_frame)return void wp.media.frames.gfpd_frame.open();wp.media.frames.gfpd_frame=wp.media({title:"Select File",multiple:!1,button:{text:"Insert File"}});var a=function(){var t=wp.media.frames.gfpd_frame.state().get("selection");t&&e.populateField(t)};wp.media.frames.gfpd_frame.on("close",a),wp.media.frames.gfpd_frame.open()},e.populateField=function(a){a.each(function(a){var n=a.id,o=a.attributes.title,r=a.attributes.filename,d=(a.attributes.filesizeHumanReadable,a.attributes.url);t(e.selectors.field).val(n),t("[data-download-link]").attr("href",d),t("[data-download-filename]").text(r),t("[data-download-title]").text(o),t(".download-meta").removeClass("no-attachment"),t(e.selectors.openBtn).addClass("has-attachment"),t(".gfpd-file-meta").addClass("has-attachment")})},e.clearField=function(){t(e.selectors.openBtn).removeClass("has-attachment"),t(".gfpd-file-meta").removeClass("has-attachment"),t(e.selectors.field).val(null),t(".download-meta").addClass("no-attachment")},e.bindEvents()};jQuery(document).ready(function(){new GFormProtected});var GFormProtected=function(){var e=this;jQuery;return e.bootstrap=function(){new GFormProtectedFileSelector,e.bindEvents()},e.bindEvents=function(){},e.bootstrap()};